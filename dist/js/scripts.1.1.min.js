!function(){"use strict";if(window.Countdown=function(t){void 0===t&&(t={}),this.timer=document.querySelector(t.timer||".timer"),this.cdTime=document.querySelector(t.cdTime||".timer__display"),this.cdStart=document.querySelector(t.cdStart||".timer__btn-on"),this.controller=document.querySelectorAll(t.controller||".timer__controller > a"),this.timerOnClass=t.timerOnClass||"timer--on",this.timeNotice=document.querySelector(t.timeNotice||".notice:first-of-type > time"),this.intervalT=t.intervalT||null,this.timeoutT=t.timeoutT||null},window.Countdown.prototype={init:function(){var t=this;t.cdStart.addEventListener("click",function(e){return-1!==t.timer.className.indexOf(t.timerOnClass)?(t.reset(),e.stopPropagation(),!1):t.getCurrTime()?void Notification.requestPermission(function(){var e,i=(new Notification("Countdown",{body:"Countdown activated",tag:"countdown-activated"}),new Date),n=new Date,o=t.getCurrTime();t.timer.classList.add(t.timerOnClass),t.intervalT=setInterval(function(){t.updTimer(!1,!0)},1e3),t.timeoutT=setTimeout(function(){t.isOn()&&(e=new Notification("Countdown",{body:"Countdown ended",tag:"countdown-ended"}),t.reset())},o),n.setTime(i.getTime()+o),t.timeNotice.innerText=t.toTimeFormat(n),[].forEach.call(document.querySelectorAll(".notice:not(.notice--not-supported)"),function(t,e){t.style.display="block"})}):(e.stopPropagation(),!1)}),t.timer.addEventListener("wheel",function(e){t.updTimer(e.deltaY<0)}),t.timer.addEventListener("click",function(e){-1!==t.timer.className.indexOf(t.timerOnClass)&&t.reset()}),[].forEach.call(t.controller,function(e){e.addEventListener("click",function(e){-1!==e.target.className.indexOf("up")?t.updTimer(!0,!1):t.updTimer(!1,!1)})})},updTimer:function(t,e){t=t||!1,e=e||!1;var i,n=this.stringToMillisec(this.cdTime.innerText);i=e?1e3:1e4,t?n+=i:n-=i,n>=0&&(this.cdTime.innerText=this.milliSecToString(n))},stringToMillisec:function(t){var e=t.split(":");return 1e3*(60*parseInt(e[0])*60+60*parseInt(e[1])+parseInt(e[2]))},milliSecToString:function(t){t/=1e3;var e=parseInt(t/3600),i=parseInt(t%3600/60),n=t%3600%60;return(e<10?"0"+e:e)+":"+(i<10?"0"+i:i)+":"+(n<10?"0"+n:n)},toTimeFormat:function(t){return t.toLocaleTimeString(this.getLanguage(),{hour:"2-digit",minute:"2-digit",second:"2-digit"})},getLanguage:function(){return void 0!==navigator.languages?-1!==navigator.languages.indexOf("it-IT")?"it-IT":"en-EN":"it-IT"===navigator.language?"it-IT":"en-EN"},getCurrTime:function(){return this.stringToMillisec(this.cdTime.innerText)},isOn:function(){return-1!==this.timer.className.indexOf(this.timerOnClass)},reset:function(){this.timer.classList.remove(this.timerOnClass),this.cdTime.innerText="00:00:00",this.timeNotice.innerText="",clearTimeout(this.timeoutT),clearInterval(this.intervalT),[].forEach.call(document.querySelectorAll(".notice"),function(t,e){t.style.display="none"})}},"Notification"in window){(new window.Countdown).init()}else document.querySelector(".notice--not-supported").style.display="block"}();